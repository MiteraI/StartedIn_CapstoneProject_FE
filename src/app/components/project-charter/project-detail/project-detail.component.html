@if (loading) {

<nz-skeleton [nzLoading]="loading" [nzActive]="true" [nzTitle]="false" [nzParagraph]="{ rows: 12 }"></nz-skeleton>
}@else {

<div class="gap-5 flex flex-col bg-white border w-full">
  <!-- Project Logo and General Info -->
  <div class="flex flex-col md:flex-row items-center md:items-start gap-4 md:gap-6 bg-purple-200 rounded-lg p-4">
    <!-- Logo Section -->
    <div class="p-2">
      <img
        *ngIf="projectGeneralInfo?.logoUrl"
        [src]="projectGeneralInfo?.logoUrl"
        alt="Project Logo"
        class="w-20 h-20 md:w-32 md:h-32 rounded-full border-2 border-purple-400 shadow-md"
      />
      <div *ngIf="!projectGeneralInfo?.logoUrl" class="w-20 h-20 md:w-32 md:h-32 rounded-full bg-gray-300 flex items-center justify-center">
        <span nz-icon nzType="project" nzTheme="outline" class="text-xl md:text-3xl text-gray-500"></span>
      </div>
    </div>

    <!-- General Info -->
    <div class="text-center md:text-left">
      <h2 class="text-xl md:text-2xl font-bold text-gray-700">{{ projectGeneralInfo?.projectName }}</h2>
      <p class="text-sm md:text-base text-gray-600 mt-2">
        <span nz-icon nzType="calendar" nzTheme="outline"></span>
        Ngày thành lập: {{ projectGeneralInfo?.startDate | date : 'dd-MM-yyyy' }}
      </p>
      <p class="text-sm md:text-base text-gray-600 mt-1">
        <span nz-icon nzType="idcard" nzTheme="outline"></span>
        Thông tin dự án: {{ projectGeneralInfo?.description }}
      </p>
    </div>
  </div>

  <!-- Collapsible Sections -->
  <nz-collapse class="w-full">
    <!-- Team Members Table -->
    <nz-collapse-panel [nzHeader]="'Các thành viên dự án'" nzActive="true" class="bg-purple-200 rounded-lg w-full">
      <!-- Table Wrapper for Mobile -->
      <div class="overflow-x-auto w-full">
        <nz-table class="custom-table shadow-md w-full" #teamMemberTable [nzShowPagination]="false" nzBordered="true" [nzData]="projectGeneralInfo?.members ?? []">
          <thead>
            <tr>
              <th class="text-center bg-purple-100">Tên Thành Viên</th>
              <th class="text-center bg-purple-100">Vai Trò</th>
              <th class="text-center bg-purple-100">Email</th>
            </tr>
          </thead>
          <tbody>
            @for (data of teamMemberTable.data; track $index) {
            <tr class="hover:bg-purple-50">
              <td class="text-center text-sm md:text-base">{{ data.fullName }}</td>
              <td class="text-center text-sm md:text-base">{{ teamRoleLabels[data.roleInTeam] }}</td>
              <td class="text-center text-sm md:text-base">
                <a href="mailto:{{ data.email }}" class="text-purple-600 hover:text-purple-800">
                  {{ data.email }}
                </a>
              </td>
            </tr>
            }
          </tbody>
        </nz-table>
      </div>
    </nz-collapse-panel>
  </nz-collapse>
</div>
}
