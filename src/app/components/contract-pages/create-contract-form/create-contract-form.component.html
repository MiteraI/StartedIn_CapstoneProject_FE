<form [formGroup]="contractForm" (ngSubmit)="onSubmit()" class="contract-form">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Contract Details</ion-card-title>
    </ion-card-header>

    <ion-card-content>
      <nz-form-item>
        <nz-form-label [nzSpan]="6" [nzLabelAlign]="'left'">Contract Name</nz-form-label>
        <nz-form-control [nzSpan]="18" nzErrorTip="Please input a valid name!">
          <input nz-input formControlName="contractName" placeholder="Enter contract name" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSpan]="6" [nzLabelAlign]="'left'">Share Quantity</nz-form-label>
        <nz-form-control [nzSpan]="18" nzErrorTip="Please input a valid quantity!">
          <nz-input-number
            formControlName="amount"
            [nzMin]="1"
            [nzStep]="1"
            [nzPrecision]="0">
          </nz-input-number>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSpan]="6" [nzLabelAlign]="'left'">Percentage</nz-form-label>
        <nz-form-control [nzSpan]="18" nzErrorTip="Please input a valid percentage!">
          <nz-input-number
            formControlName="amount"
            [nzMin]="0.01"
            [nzMax]="100"
            [nzStep]="0.01"
            [nzPrecision]="0">
          </nz-input-number>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label [nzSpan]="6" [nzLabelAlign]="'left'">Contract Policy</nz-form-label>
        <nz-form-control [nzSpan]="18" nzErrorTip="Please input a valid policy!">
          <textarea nz-input formControlName="contractPolicy" rows="4" placeholder="Enter contract policy"></textarea>
        </nz-form-control>
      </nz-form-item>

      <div class="disbursements-section">
        <div class="section-header">
          <h3>Disbursements</h3>
          <button nz-button nzType="primary" (click)="openDisbursementModal()">
            <i nz-icon nzType="plus"></i>
          </button>
        </div>

        <nz-list [nzDataSource]="disbursements" [nzRenderItem]="disbursementItem">
          <ng-template #disbursementItem let-item let-index="index">
            <nz-list-item>
              <div class="item-content">
                <span>{{ item.title }}</span>
                <div class="item-actions">
                  <button nz-button nzType="link" (click)="openDisbursementModal(item, index)">
                    <i nz-icon nzType="edit"></i>
                  </button>
                  <button nz-button nzType="link" nzDanger (click)="removeDisbursement(index)">
                    <i nz-icon nzType="delete"></i>
                  </button>
                </div>
              </div>
            </nz-list-item>
          </ng-template>
        </nz-list>
      </div>

      <div class="form-actions">
        <button nz-button nzType="primary" type="submit" [disabled]="!contractForm.valid">
          Submit
        </button>
      </div>
    </ion-card-content>
  </ion-card>
</form>
