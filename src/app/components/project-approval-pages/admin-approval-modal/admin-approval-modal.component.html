<div>
  <div class="space-y-6">
    <!-- Project Information -->
    <div>
      <h3 class="text-lg font-medium text-gray-900">Thông tin dự án</h3>
      <div class="grid grid-cols-2 gap-4 mt-2">
        <div>
          <p class="font-medium text-gray-600">Tên dự án</p>
          <p class="text-gray-800">{{ approvalData.projectName }}</p>
        </div>
        <div>
          <p class="font-medium text-gray-600">Nhóm trưởng</p>
          <p class="text-gray-800">{{ approvalData.leaderName }}</p>
        </div>
        <div>
          <p class="font-medium text-gray-600">Ngày gửi</p>
          <p class="text-gray-800">{{ approvalData.sentDate | date : 'dd/MM/yyyy hh:mm aa' }}</p>
        </div>
        <div>
          <p class="font-medium text-gray-600">Ngày duyệt</p>
          <p class="text-gray-800">{{ approvalData.approvalDate | date : 'dd/MM/yyyy hh:mm aa' }}</p>
        </div>
        <div>
          <p class="font-medium text-gray-600">Trạng thái</p>
          <nz-tag [nzColor]="getStatusColor(approvalData.status)" class="font-medium">
            {{ ProjectApprovalStatusLabel[approvalData.status] }}
          </nz-tag>
        </div>
      </div>
    </div>

    <!-- Reason -->
    <div *ngIf="approvalData.reason">
      <h3 class="text-lg font-medium text-gray-900">Lý do</h3>
      <p class="text-gray-800 mt-2">{{ approvalData.reason }}</p>
    </div>

    <!-- Documents -->
    <div>
      <h3 class="text-lg font-medium text-gray-900">Tài liệu đính kèm</h3>
      <ul class="mt-2 space-y-2">
        <li *ngFor="let doc of approvalData.documents" class="flex items-center justify-between border rounded-lg p-3">
          <div>
            <p class="font-medium text-gray-800">{{ doc.documentName }}</p>
            <p class="text-gray-600 text-sm">{{ doc.description || 'Không có mô tả' }}</p>
          </div>
          <a [href]="doc.attachmentLink" target="_blank" class="text-blue-500 hover:underline text-sm"> Tải xuống </a>
        </li>
      </ul>
    </div>

    <!-- Accept and Cancel Buttons -->
    @if( approvalData.status === ProjectApprovalStatus.PENDING){
    <div class="mt-6 flex justify-end space-x-4">
      <button
        nz-button
        nzDanger
        nzType="primary"
        nz-popover
        nzPopoverTitle="Ghi giờ làm"
        [(nzPopoverVisible)]="isModalVisible"
        nzPopoverTrigger="click"
        [nzPopoverContent]="cancelTemplate"
      >
        Từ chối
      </button>
      <button nz-button nzType="primary" [nzLoading]="isAccepting" (click)="acceptProjectApproval()" [disabled]="isAccepting">Đồng ý</button>
    </div>
    }
  </div>
</div>

<!-- Popover Content Template -->
<ng-template #cancelTemplate>
  <div class="flex flex-col gap-2">
    <label for="logTimeInput" class="text-sm text-gray-600">Lý do từ chối: </label>
    <textarea nz-input [(ngModel)]="cancelReason" class="w-full border rounded px-2 py-1" placeholder="Lý do từ chối"></textarea>
    <div class="flex justify-end gap-2 mt-2">
      <button (click)="closePopover()" nz-button nzType="default">Hủy</button>
      <button nz-button (click)="onCancel()" nzType="primary">Lưu</button>
    </div>
  </div>
</ng-template>
