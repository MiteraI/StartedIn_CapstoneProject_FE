<div class="font-bold text-3xl text-black mt-6 flex justify-center">Cài đặt</div>

<div *ngIf="isLeader === null" class="flex justify-center p-4">
  <nz-spin nzSimple></nz-spin>
</div>

<div *ngIf="isLeader === true" class="p-4 max-w-6xl mx-auto overflow-y-auto">
  <!-- Leaving Requests Section -->
  <div class="mb-6">
    <div class="text-lg font-bold mb-4">Yêu cầu rời dự án</div>
    <app-leaving-request-list [projectId]="projectId"></app-leaving-request-list>
  </div>

  <hr class="mb-6" />

  <!-- Default Meeting Url Section -->
  <div class="mb-6">
    <div class="text-lg font-bold">Link cuộc họp mặc định</div>
    <div class="text-gray-500 mb-4">Khi bạn tạo một cuộc họp mới, đây sẽ là link cuộc họp được điền vào mặc định. Bạn vẫn có thể thay đổi link này tùy theo cuộc họp</div>
    <div class="flex flex-col md:flex-row gap-4">
      <nz-input-group [nzPrefix]="prefixTemplate" class="flex-grow">
        <input
          nz-input
          [(ngModel)]="defaultMeetingUrl"
          placeholder="Nhập link cuộc họp mặc định"
          [disabled]="isSubmitting"
        />
        <ng-template #prefixTemplate>
          <mat-icon class="text-gray-500">video_camera_front</mat-icon>
        </ng-template>
      </nz-input-group>
      <button
        nz-button
        nzType="primary"
        (click)="setDefaultMeetingUrl()"
        [nzLoading]="isSubmitting"
        [disabled]="!defaultMeetingUrl"
      >
        Lưu
      </button>
    </div>
    <div *ngIf="defaultMeetingUrl" class="mt-2 text-sm text-gray-500">
      Link hiện tại: {{ defaultMeetingUrl }}
    </div>
  </div>

  <hr class="mb-6" />

  <!-- Close Project Section -->
  <div class="flex flex-wrap py-2 px-4 border border-blue-400 rounded mb-2">
    <div>
      <div class="text-lg font-bold">PayOS</div>
      <div class="text-sm text-gray-500">
        PayOS là cổng thanh toán điện tử giúp bạn nhận thanh toán từ nhà đầu tư một cách an toàn và thuận tiện.
      </div>
    </div>
    <div class="flex justify-end items-center w-full md:w-auto md:flex-grow">
      <button nz-button nzType="primary" [routerLink]="['/projects', projectId, 'payos']">Cài đặt PayOS</button>
    </div>
  </div>

  <!-- Close Project Section -->
  <div class="flex flex-wrap py-2 px-4 border border-red-600 rounded">
    <div>
      <div class="text-lg font-bold">Đóng dự án</div>
      <div class="text-sm text-gray-500">Sau khi đóng dự án, bạn sẽ không thể truy cập vào dự án này nữa.</div>
    </div>
    <div class="flex justify-end items-center w-full md:w-auto md:flex-grow">
      <button nz-button nzType="primary" nzDanger (click)="openCloseProjectModal()">Đóng dự án</button>
    </div>
  </div>
</div>

<div *ngIf="isLeader === false" class="p-4 max-w-6xl mx-auto overflow-y-auto">
  <div class="flex flex-wrap py-2 px-4 border border-red-600 rounded">
    <div>
      <div class="text-lg font-bold">Rời dự án</div>
      <div class="text-sm text-gray-500">Sau khi rời dự án, bạn sẽ không thể truy cập vào dự án này nữa.</div>
    </div>
    <div class="flex justify-end items-center w-full md:w-auto md:flex-grow">
      <button nz-button nzType="primary" nzDanger (click)="openLeaveProjectModal()">Rời dự án</button>
    </div>
  </div>
</div>
