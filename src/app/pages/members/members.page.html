<div class="max-w-7xl mx-auto p-4">
  <div class="font-bold text-3xl text-black mb-6 flex justify-center">Danh sách thành viên</div>
  <!-- Filter Controls -->
  <div class="mb-6 flex flex-wrap items-center gap-4">
    <div class="flex-1">
      <input
        nz-input
        placeholder="Tìm kiếm theo tên hoặc email"
        [(ngModel)]="searchText"
        (ngModelChange)="applyFilters()"
      >
    </div>
    <nz-select
      [(ngModel)]="sortBy"
      (ngModelChange)="applyFilters()"
      class="w-48"
    >
      <nz-option nzValue="name" nzLabel="Sắp xếp theo tên"></nz-option>
      <nz-option nzValue="email" nzLabel="Sắp xếp theo email"></nz-option>
      <nz-option nzValue="role" nzLabel="Sắp xếp theo vai trò"></nz-option>
      <nz-option nzValue="equity" nzLabel="Sắp xếp theo cổ phần"></nz-option>
    </nz-select>
    <button
      nz-button
      class="px-1"
      (click)="ascending = !ascending; applyFilters()"
    >
      <mat-icon *ngIf="!ascending" fontIcon="arrow_drop_up"></mat-icon>
      <mat-icon *ngIf="ascending" fontIcon="arrow_drop_down"></mat-icon>
    </button>
  </div>

  <!-- Member List -->
  <div class="space-y-4">
    <div
      *ngFor="let member of filteredMembers"
      class="bg-white rounded-lg shadow-sm p-4 flex flex-wrap items-center justify-between hover:shadow-md transition-shadow cursor-pointer"
      [routerLink]="['/users', member.id]"
    >
      <!-- Left side: Member info -->
      <div class="flex items-center space-x-4 w-full sm:w-fit">
        <div class="min-w-16">
        <nz-avatar
          [nzSize]="64"
          [nzSrc]="member.profilePicture"
          [nzText]="member.fullName | initialsOnly"
          class="bg-blue-500"
        ></nz-avatar>
        </div>
        <div class="w-[calc(100%-5rem)]">
          <div class="font-medium text-lg truncate">{{ member.fullName }}</div>
          <div class="text-gray-500 truncate">{{ member.email }}</div>
          <div class="text-sm mt-1">
            <span
              class="px-2 py-1 rounded-full"
              [ngClass]="{
                'bg-blue-100 text-blue-600': member.roleInTeam === teamRoles.LEADER,
                'bg-cyan-100 text-cyan-600': member.roleInTeam === teamRoles.MEMBER,
                'bg-green-100 text-green-600': member.roleInTeam === teamRoles.INVESTOR,
                'bg-orange-100 text-orange-600': member.roleInTeam === teamRoles.MENTOR
              }"
            >
              {{ teamRoleLabels[member.roleInTeam] }}
            </span>
          </div>
        </div>
      </div>

      <!-- Right side: Equity info -->
      <div class="min-w-36 mt-6 sm:mt-0">
        <div class="font-medium">{{ member.equity ? 'Giữ ' + member.equity + '% cổ phần' : 'Không có cổ phần' }}</div>
        <nz-progress
          [nzPercent]="member.equity"
          [nzShowInfo]="false"
          [nzStrokeColor]="'#4F46E5'"
          class="w-32"
        ></nz-progress>
      </div>
    </div>
  </div>
</div>
